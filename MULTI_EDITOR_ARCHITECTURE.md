# Архитектура простых множественных редакторов

## Обзор

Новая архитектура поддерживает:
- ✅ Множественные редакторы без табов
- ✅ Горизонтальное/вертикальное разделение
- ✅ Регулируемые границы между редакторами
- ✅ Компактное отображение пути файла вверху панели
- ✅ Клик в file tree открывает файл в активном редакторе

## Компоненты

### 1. EditorManager
**Файл:** `lib/ui/editor_manager.rb`
- Управляет всеми панелями редакторов
- Отслеживает активную панель
- Обрабатывает разделение и закрытие панелей

**Методы:**
- `load_file(path)` - загрузка файла в активный редактор
- `split_horizontal()` - горизонтальное разделение
- `split_vertical()` - вертикальное разделение
- `close_pane(pane)` - закрытие панели

### 2. EditorPane
**Файл:** `lib/ui/editor_pane.rb`
- Контейнер для одного редактора
- Отображает путь файла вверху панели
- Один CodeEditor на панель

**Методы:**
- `load_file(path)` - загрузка файла в редактор
- `get_current_editor()` - получение редактора
- `get_current_file()` - получение пути текущего файла

### 3. SplitContainer
**Файл:** `lib/ui/split_container.rb`
- Управляет рекурсивным разделением панелей
- Создает Gtk::Paned для изменения размера
- Правильно заменяет панели в их позициях
- Корректно обрабатывает удаление панелей с сохранением sibling

**Методы:**
- `split_horizontal(existing, new)` - горизонтальное разделение
- `split_vertical(existing, new)` - вертикальное разделение
- `remove_pane(pane)` - удаление панели

### 4. MainWindow (обновлен)
**Файл:** `lib/ui/main_window.rb`
- Использует EditorManager вместо одного CodeEditor
- Добавлены горячие клавиши для разделения

## Горячие клавиши

- `Ctrl+Shift+E` - горизонтальное разделение
- `Ctrl+Shift+O` - вертикальное разделение  
- `Ctrl+W` - закрыть панель (если панелей больше одной)
- Клик на файл в tree - открыть в активном редакторе

## Поток работы

1. **Открытие файла:**
   - Клик на файл в FileExplorer
   - Вызов EditorManager.load_file()
   - Файл загружается в активную панель
   - Путь файла отображается вверху панели

2. **Разделение экрана:**
   - Нажатие Ctrl+Shift+E/O
   - Создание новой EditorPane
   - Разделение текущей активной панели
   - Новая панель становится активной

3. **Закрытие панели:**
   - Нажатие Ctrl+W
   - Удаление активной панели из разделения
   - На месте разделения остается sibling панель
   - Последняя панель не может быть закрыта

## Преимущества архитектуры

1. **Простота** - без громоздких табов, один файл на панель
2. **Модульность** - каждый компонент отвечает за свою задачу
3. **Расширяемость** - легко добавить новые типы разделения
4. **Читаемость** - путь файла всегда виден вверху панели
5. **Удобство** - интуитивные горячие клавиши и управление
6. **Стабильность** - корректное управление панелями без ошибок GTK

## Совместимость

- Полная совместимость с существующим CodeEditor
- Использует те же компоненты syntax highlighting
- Поддерживает все существующие языки программирования 